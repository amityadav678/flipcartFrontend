{"ast":null,"code":"import CartDetail from'./CartDetail';import PriceCalculation from'./PriceCalculation';import Col from'react-bootstrap/Col';import Row from'react-bootstrap/Row';import React,{useContext,useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import PriceTag from'../BuyNow/PriceTag';import LooksOneIcon from'@mui/icons-material/LooksOne';import Button from'@mui/material/Button';import BoltIcon from'@mui/icons-material/Bolt';import Footerpage from'../Footer/Footerpage';import{DataContext}from'../ContextApi/DataProvider';import{CircularProgress}from'@mui/material';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const{setProductPropdata}=useContext(DataContext);const[products,setProducts]=useState([]);console.log('products:',products);const[priceCalculateProduct,setPriceCalculateProduct]=useState([]);const[showBox,setShowBox]=useState(1);const navigate=useNavigate();const[calculationPrice,setCalculationPrice]=useState({price:0,discount:0,totalPrice:''});const CalculatePriceWhenQuantityChange=(pri,disc,totprice,direction)=>{if(direction==='dec'){setCalculationPrice(prevState=>({price:prevState.price-disc,discount:prevState.discount-pri,totalPrice:prevState.totalPrice-(disc-pri)}));}else{setCalculationPrice(prevState=>({price:prevState.price+disc,discount:prevState.discount+pri,totalPrice:prevState.totalPrice+(disc-pri)}));}};useEffect(()=>{let totalPrice=0;let totalDiscount=0;priceCalculateProduct.forEach(product=>{totalPrice+=product.price.mrp;totalDiscount+=product.price.mrp-product.price.cost||0;});setCalculationPrice({price:totalPrice,discount:totalDiscount,totalPrice:totalPrice-totalDiscount});},[priceCalculateProduct]);useEffect(()=>{handleGetProducts();},[]);const handleShowBox=id=>{setShowBox(id);};const handleGetProducts=async()=>{var url=process.env.REACT_APP_BACKEND_URL;try{const response=await fetch(\"\".concat(url,\"/find-cart\"),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}});if(!response.ok){throw new Error('Network response was not ok');}const products=await response.json();setProducts(products);setPriceCalculateProduct(products);}catch(error){console.error('There was a problem with the fetch request:',error);}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'whitesmoke'},children:products.length==0?/*#__PURE__*/_jsxs(_Fragment,{children:[' ',/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'100vh'// Ensures it covers the entire viewport height\n},children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CircularProgress,{size:30})})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[' ',/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:8,md:8,sm:6,xs:12,className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"header1\",className:\"HeaderBox \".concat(showBox===1?'active':''),onClick:()=>handleShowBox(1),children:[/*#__PURE__*/_jsx(LooksOneIcon,{id:\"1Icon\"}),\" \\xA0 ORDER SUMMARY\"]}),showBox===1&&/*#__PURE__*/_jsx(\"div\",{className:\"containerBox\",style:{marginTop:'-20px'},children:products.map(data=>/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CartDetail,{data:data,setProducts:setProducts,products:products,CalculatePriceWhenQuantityChange:CalculatePriceWhenQuantityChange},data.id)}))}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',backgroundColor:'white',display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsxs(Button,{onClick:()=>{setProductPropdata(products);navigate(\"/place-order\");},style:{backgroundColor:'#fb641b',width:'300px',color:'white',height:'55px',borderRadius:'2px'},children:[/*#__PURE__*/_jsx(BoltIcon,{}),\"PLACE ORDER\"]})})]})}),/*#__PURE__*/_jsx(Col,{lg:4,md:4,sm:6,xs:12,children:/*#__PURE__*/_jsx(\"div\",{className:\"price-container\",children:/*#__PURE__*/_jsx(PriceTag,{calculationPrice:calculationPrice})})})]}),/*#__PURE__*/_jsx(Footerpage,{})]})})});};export default Cart;","map":{"version":3,"names":["CartDetail","PriceCalculation","Col","Row","React","useContext","useEffect","useState","useNavigate","useParams","PriceTag","LooksOneIcon","Button","BoltIcon","Footerpage","DataContext","CircularProgress","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Cart","setProductPropdata","products","setProducts","console","log","priceCalculateProduct","setPriceCalculateProduct","showBox","setShowBox","navigate","calculationPrice","setCalculationPrice","price","discount","totalPrice","CalculatePriceWhenQuantityChange","pri","disc","totprice","direction","prevState","totalDiscount","forEach","product","mrp","cost","handleGetProducts","handleShowBox","id","url","process","env","REACT_APP_BACKEND_URL","response","fetch","concat","method","headers","Accept","ok","Error","json","error","children","style","backgroundColor","length","display","justifyContent","alignItems","minHeight","size","lg","md","sm","xs","className","onClick","marginTop","map","data","padding","width","color","height","borderRadius"],"sources":["C:/Users/91788/Desktop/New folder/flipcart/frontend/src/Componants/AddToCart/Cart.jsx"],"sourcesContent":["import CartDetail from './CartDetail';\r\nimport PriceCalculation from './PriceCalculation';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport PriceTag from '../BuyNow/PriceTag';\r\nimport LooksOneIcon from '@mui/icons-material/LooksOne';\r\nimport Button from '@mui/material/Button';\r\nimport BoltIcon from '@mui/icons-material/Bolt';\r\nimport Footerpage from '../Footer/Footerpage';\r\nimport { DataContext } from '../ContextApi/DataProvider';\r\nimport { CircularProgress } from '@mui/material';\r\n\r\nconst Cart = () => {\r\n    const { setProductPropdata } = useContext(DataContext);\r\n    const [products, setProducts] = useState([]);\r\n    console.log('products:', products);\r\n    const [priceCalculateProduct, setPriceCalculateProduct] = useState([]);\r\n\r\n    const [showBox, setShowBox] = useState(1);\r\n    const navigate = useNavigate();\r\n\r\n    const [calculationPrice, setCalculationPrice] = useState({\r\n        price: 0,\r\n        discount: 0,\r\n        totalPrice: '',\r\n    });\r\n\r\n    const CalculatePriceWhenQuantityChange = (\r\n        pri,\r\n        disc,\r\n        totprice,\r\n        direction\r\n    ) => {\r\n        if (direction === 'dec') {\r\n            setCalculationPrice((prevState) => ({\r\n                price: prevState.price - disc,\r\n                discount: prevState.discount - pri,\r\n                totalPrice: prevState.totalPrice - (disc - pri),\r\n            }));\r\n        } else {\r\n            setCalculationPrice((prevState) => ({\r\n                price: prevState.price + disc,\r\n                discount: prevState.discount + pri,\r\n                totalPrice: prevState.totalPrice + (disc - pri),\r\n            }));\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        let totalPrice = 0;\r\n        let totalDiscount = 0;\r\n\r\n        priceCalculateProduct.forEach((product) => {\r\n            totalPrice += product.price.mrp;\r\n            totalDiscount += product.price.mrp - product.price.cost || 0;\r\n        });\r\n\r\n        setCalculationPrice({\r\n            price: totalPrice,\r\n            discount: totalDiscount,\r\n            totalPrice: totalPrice - totalDiscount,\r\n        });\r\n    }, [priceCalculateProduct]);\r\n\r\n    useEffect(() => {\r\n        handleGetProducts();\r\n    }, []);\r\n\r\n    const handleShowBox = (id) => {\r\n        setShowBox(id);\r\n    };\r\n\r\n    const handleGetProducts = async () => {\r\n        var url = process.env.REACT_APP_BACKEND_URL;\r\n        try {\r\n            const response = await fetch(`${url}/find-cart`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Network response was not ok');\r\n            }\r\n            const products = await response.json();\r\n            setProducts(products);\r\n            setPriceCalculateProduct(products);\r\n        } catch (error) {\r\n            console.error('There was a problem with the fetch request:', error);\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <div style={{ backgroundColor: 'whitesmoke' }}>\r\n                {products.length == 0 ? (\r\n                    <>\r\n                        {' '}\r\n                        <div\r\n                            style={{\r\n                                display: 'flex',\r\n                                justifyContent: 'center',\r\n                                alignItems: 'center',\r\n                                minHeight: '100vh', // Ensures it covers the entire viewport height\r\n                            }}\r\n                        >\r\n                            <div>\r\n                                <CircularProgress size={30} />\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        {' '}\r\n                        <Row>\r\n                            <Col lg={8} md={8} sm={6} xs={12} className=\"col\">\r\n                                <div className=\"content-container\">\r\n                                    <div\r\n                                        id=\"header1\"\r\n                                        className={`HeaderBox ${\r\n                                            showBox === 1 ? 'active' : ''\r\n                                        }`}\r\n                                        onClick={() => handleShowBox(1)}\r\n                                    >\r\n                                        <LooksOneIcon id=\"1Icon\" /> &nbsp; ORDER\r\n                                        SUMMARY\r\n                                    </div>\r\n                                    {showBox === 1 && (\r\n                                        <div\r\n                                            className=\"containerBox\"\r\n                                            style={{ marginTop: '-20px' }}\r\n                                        >\r\n                                            {products.map((data) => (\r\n                                                <>\r\n                                                    <CartDetail\r\n                                                        key={data.id}\r\n                                                        data={data}\r\n                                                        setProducts={\r\n                                                            setProducts\r\n                                                        }\r\n                                                        products={products}\r\n                                                        CalculatePriceWhenQuantityChange={\r\n                                                            CalculatePriceWhenQuantityChange\r\n                                                        }\r\n                                                    />\r\n                                                </>\r\n                                            ))}\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div\r\n                                        style={{\r\n                                            padding: '20px',\r\n                                            backgroundColor: 'white',\r\n                                            display: 'flex',\r\n                                            justifyContent: 'flex-end',\r\n                                        }}\r\n                                    >\r\n                                        <Button\r\n                                            onClick={() => {\r\n                                                setProductPropdata(products);\r\n                                                navigate(`/place-order`);\r\n                                            }}\r\n                                            style={{\r\n                                                backgroundColor: '#fb641b',\r\n                                                width: '300px',\r\n                                                color: 'white',\r\n                                                height: '55px',\r\n                                                borderRadius: '2px',\r\n                                            }}\r\n                                        >\r\n                                            <BoltIcon />\r\n                                            PLACE ORDER\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </Col>\r\n                            <Col lg={4} md={4} sm={6} xs={12}>\r\n                                <div className=\"price-container\">\r\n                                    <PriceTag\r\n                                        calculationPrice={calculationPrice}\r\n                                    />\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                        <Footerpage />\r\n                    </>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}